# ğŸ““COMPILER - MACROğŸ““

<details>
<summary><b>ğŸ“–1. Compiler - TrÃ¬nh biÃªn dá»‹ch</b></summary>
 
- **Compiler (TrÃ¬nh biÃªn dá»‹ch )**: lÃ  chÆ°Æ¡ng trÃ¬nh biÃªn dá»‹ch cÃ¡c code cá»§a ngÃ´n ngá»¯ láº­p trÃ¬nh tÆ°Æ¡ng á»©ng thÃ nh cÃ¡c mÃ£ nhá»‹ phÃ¢n mÃ  mÃ¡y cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c.
- QuÃ¡ trÃ¬nh biÃªn dá»‹ch gá»“m 4 giai Ä‘oáº¡n:

![image](https://github.com/user-attachments/assets/a0dfa386-3802-4682-a506-cd6534989b3d)
<br>&nbsp;**a. Preprocess (Tiá»n xá»­ lÃ½):**<br>
&nbsp;&nbsp;- &nbsp;**TÃ¡c dá»¥ng:** Chuyá»ƒn cÃ¡c _file.c_, _file.h_ sang _file.i_.<br>
&nbsp;&nbsp;- &nbsp;**Äáº·c Ä‘iá»ƒm:**<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &nbsp;Xá»­ lÃ½ cÃ¡c loáº¡i chá»‰ thá»‹ tiá»n xá»­ lÃ½.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &nbsp;XÃ³a bá» cÃ¡c chÃº thÃ­ch.<br>
&nbsp;&nbsp;- &nbsp;**CÃº phÃ¡p:** `gcc -E main.c -o main.i`.<br>

&nbsp;**b. Compiler (BiÃªn dá»‹ch):**<br>
&nbsp;&nbsp;- &nbsp;**TÃ¡c dá»¥ng:** Chuyá»ƒn _file.i_ sang _file.s_.<br>
&nbsp;&nbsp;- &nbsp;**Äáº·c Ä‘iá»ƒm:**<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &nbsp;_file.s_: lÃ  file assembly code thao tÃ¡c Ä‘Æ°á»£c trá»±c tiáº¿p vá»›i CPU.<br>
&nbsp;&nbsp;- &nbsp;**CÃº phÃ¡p:** `gcc -S main.i -o main.s`.<br>

&nbsp;**c. Assembler (Há»£p ngá»¯):**<br>
&nbsp;&nbsp;- &nbsp;**TÃ¡c dá»¥ng:** Chuyá»ƒn _file.s_ sang _file.o_.<br>
&nbsp;&nbsp;- &nbsp;**Äáº·c Ä‘iá»ƒm:**<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &nbsp;Dá»‹ch chÆ°Æ¡ng trÃ¬nh sang mÃ£ mÃ¡y 0 vÃ  1.<br>
&nbsp;&nbsp;- &nbsp;**CÃº phÃ¡p:** `gcc -c main.s -o main.o`.<br>

&nbsp;**d. Linker (LiÃªn káº¿t):**<br>
&nbsp;&nbsp;- &nbsp;**TÃ¡c dá»¥ng:** Chuyá»ƒn _file.o_ sang _file.exe_.<br>
&nbsp;&nbsp;- &nbsp;**Äáº·c Ä‘iá»ƒm:**<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &nbsp;LiÃªn káº¿t cÃ¡c file.o láº¡i vá»›i nhau.<br>
&nbsp;&nbsp;- &nbsp;**CÃº phÃ¡p:** `gcc main.o test.o -o main`.<br>
</details>
 
--------------------------------------------------------------------------------------------------------------------------------------------------------

<details>
<summary><b>ğŸ“–2. Marco</b></summary>
  
- **Marco:** LÃ  tá»« chá»‰ nhá»¯ng thÃ´ng tin sáº½ Ä‘Æ°á»£c xá»­ lÃ½ á»Ÿ quÃ¡ trÃ¬nh tiá»n xá»­ lÃ½ 
- CÃ¡c loáº¡i chá»‰ thá»‹ tiá»n xá»­ lÃ½ bao gá»“m:

&nbsp;**a. #include:** Chá»‰ thá»‹ bao hÃ m tá»‡p.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;**Chá»©c nÄƒng:**  ChÃ¨n ná»™i dung file khÃ¡c vÃ o mÃ£ nguá»“n chÃ­nh.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;**#include <...>:** ThÆ° viá»‡n trá»¯ cá»§a C. TÃ¬m kiáº¿m file trong thÆ° má»¥c cÃ i Ä‘áº·t.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;**#include "...":**  File thÆ° viá»‡n do ngÆ°á»i dÃ¹ng tá»± táº¡o. TÃ¬m kiáº¿m file trong thÆ° má»¥c hiá»‡n táº¡i.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;**VÃ­ dá»¥:**.<br>
```c
#include <stdio.h>
#include "test.h"                          
```
&nbsp;**b. #define:** Chá»‰ thá»‹ Ä‘á»‹nh nghÄ©a.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;**Chá»©c nÄƒng:**  DÃ¹ng Ä‘á»ƒ Ä‘á»‹nh nghÄ©a marco, trÃ¡nh láº·p láº¡i nhá»¯ng mÃ£ nguá»“n.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;***Note:**  Khi viáº¿t define cho 1 hÃ m cÃ³ nhiá»u dÃ²ng thÃ¬ pháº£i cÃ³ giáº¥u `\` dá»ƒ liÃªn káº¿t cÃ¡c dÃ²ng.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;**VÃ­ dá»¥:**.<br>
```c
#define Creat_func(name, cmd)        \
int name()                           \
{                                    \
     printf(#cmd);                   \
}                                    \
```
&nbsp;**c. #undef:** Chá»‰ thá»‹ há»§y Ä‘á»‹nh nghÄ©a.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;**Chá»©c nÄƒng:**  DÃ¹ng Ä‘á»ƒ há»§y Ä‘á»‹nh nghÄ©a marco.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;**VÃ­ dá»¥:**
```c
#define SIZE 50    
#undef SIZE                          
#define SIZE 40
```

&nbsp;**d. #if, #elif, #else, #endif:** Chá»‰ thá»‹ biÃªn dá»‹ch cÃ³ Ä‘iá»u kiá»‡n.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;**Chá»©c nÄƒng:**  DÃ¹ng Ä‘á»ƒ kiá»ƒm tra Ä‘iá»u kiá»‡n cá»§a marco.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;**VÃ­ dá»¥:**<br>
```c
#define ESP32 1   
#define STM32 2
#define ATmega324 3

#define MCU STM32

#if MCU == STM32
   void digitalWrite(Pin pin, Status state){
     if(state == HIGH){
        GPIOA->BSRR = (1 << pin);
     }
#elif MCU == ESP32
   void digitalWrite(Pin pin, Status state){
     if(state == HIGH){
        GPIO.out_w1ts = (1 << pin);
     }
#else MCU == ATmega324
   void digitalWrite(Pin pin, Status state){
     if(state == HIGH){
        PORTA |= (1 << pin);
     }
#endif
```

&nbsp;**e. #ifdef, #ifndef:** Chá»‰ thá»‹ biÃªn dá»‹ch cÃ³ Ä‘iá»u kiá»‡n.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;**Chá»©c nÄƒng:**  Kiá»ƒm tra xem marco Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ© hay chÆ°a Ä‘á»ƒ thá»±c hiá»‡n thao tÃ¡c phÃ­a dÆ°á»›i nÃ³.<br>
&nbsp;&nbsp;&nbsp;- &nbsp;**VÃ­ dá»¥:**<br>
```c
#ifndef TEST_H    
#define TEST_H                        

void display();

#endif
```
- CÃ¡c loáº¡i toÃ¡n tá»­ trong marco bao gá»“m:

&nbsp;- &nbsp;**##:** ná»‘i chuá»—i.<br>
&nbsp;- &nbsp;**VÃ­ dá»¥:**<br>
```c
#define CREATE_VAR(name)    \
int int_##name;             \
char char_##name;           \
CREATE_VAR(test1);   
```
```c
Kq:  int int_test1; char char_test1;   
```
&nbsp;- &nbsp;**#:** chuáº©n hÃ³a Ä‘oáº¡n vÄƒn báº£n thÃ nh chuá»—i.<br>
&nbsp;- &nbsp;**VÃ­ dá»¥:**<br>
```c
#define CREATE_FUNC(name, cmd)
   void name()
   {
     printf(#cmd);
   }
CREATE_FUNC(test1, This is function\n);   
```
```c
Kq:  void test1(){ printf("This is function\n"); }    
```
&nbsp;- &nbsp;**Variadic:** dÃ¹ng cho nhá»¯ng hÃ m khÃ´ng xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c tham sá»‘ truyá»n vÃ o vÃ  gá»“m 2 thÃ nh pháº§n.<br>
&nbsp;&nbsp;&nbsp;&nbsp;+ &nbsp;**... :** biá»ƒu thá»‹ danh sÃ¡ch Ä‘á»‘i sá»‘.<br>
&nbsp;&nbsp;&nbsp;&nbsp;+ &nbsp;**__VA_ARGS__ :** Thay tháº¿ báº±ng danh sÃ¡ch cÃ¡c Ä‘á»‘i sá»‘.<br>
&nbsp;- &nbsp;**VÃ­ dá»¥:**<br>
```c
#define print(...) __VA_ARGS__   
```
  </details>

  
-----------------------------------------------------------------------------------------------------------------------------------------------
